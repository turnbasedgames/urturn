"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("penpal"),n=require("axios");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=t(e),a=t(n);function i(e,r,n,t){return new(n||(n=Promise))((function(o,a){function i(e){try{u(t.next(e))}catch(e){a(e)}}function l(e){try{u(t.throw(e))}catch(e){a(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,l)}u((t=t.apply(e,r||[])).next())}))}function l(e,r){var n,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=r.call(e,i)}catch(e){a=[6,e],t=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var u,c={log:console.log,info:console.log,error:console.error,warn:console.warn};!function(e){e.RoomNotJoinable="RoomNotJoinable",e.CreatorError="CreatorError"}(u||(u={})),exports.RoomPlayer=function(n){var t=n.user,s=n.src,f=n.setChildClient,d=n.makeMove,h=e.useCallback((function(e){if(null!=e){e.src=s;var n=r.connectToChild({iframe:e,methods:{getLocalPlayer:function(){return i(this,void 0,void 0,(function(){return l(this,(function(e){return[2,{id:t.id,username:t.username}]}))}))},makeMove:function(e){var r;return i(this,void 0,void 0,(function(){var n,t;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,d(e)];case 1:return o.sent(),[2,{success:!0}];case 2:return n=o.sent(),a.default.isAxiosError(n)&&null!=n.response?(null==(t=null===(r=n.response)||void 0===r?void 0:r.data)?void 0:t.name)===u.CreatorError?[2,{error:null==t?void 0:t.creatorError}]:[2,{error:n.response.data}]:[2,{error:n}];case 3:return[2]}}))}))}}});n.promise.then((function(e){f(e)})).catch(c.error)}}),[]);return o.default.createElement("iframe",{ref:h,title:"gameFrame",sandbox:"allow-scripts allow-forms allow-same-origin",id:"gameFrame",style:{height:"100%",width:"100%",border:"none"}})};
//# sourceMappingURL=index.js.map
