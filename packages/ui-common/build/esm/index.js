import r,{useCallback as e}from"react";import{connectToChild as n}from"penpal";import o from"axios";function t(r,e,n,o){return new(n||(n=Promise))((function(t,a){function i(r){try{u(o.next(r))}catch(r){a(r)}}function l(r){try{u(o.throw(r))}catch(r){a(r)}}function u(r){var e;r.done?t(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(i,l)}u((o=o.apply(r,e||[])).next())}))}function a(r,e){var n,o,t,a,i={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(t=2&a[0]?o.return:a[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,a[1])).done)return t;switch(o=0,t&&(a=[2&a[0],t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(t=i.trys,(t=t.length>0&&t[t.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(6===a[0]&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(r,i)}catch(r){a=[6,r],o=0}finally{n=t=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var i,l={log:console.log,info:console.log,error:console.error,warn:console.warn};function u(u){var c=u.user,s=u.src,f=u.setChildClient,p=u.makeMove,h=e((function(r){if(null!=r){r.src=s;var e=n({iframe:r,methods:{getLocalPlayer:function(){return t(this,void 0,void 0,(function(){return a(this,(function(r){return[2,{id:c.id,username:c.username}]}))}))},makeMove:function(r){var e;return t(this,void 0,void 0,(function(){var n,t;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,p(r)];case 1:return a.sent(),[2,{success:!0}];case 2:return n=a.sent(),o.isAxiosError(n)&&null!=n.response?(null==(t=null===(e=n.response)||void 0===e?void 0:e.data)?void 0:t.name)===i.CreatorError?[2,{error:null==t?void 0:t.creatorError}]:[2,{error:n.response.data}]:[2,{error:n}];case 3:return[2]}}))}))}}});e.promise.then((function(r){f(r)})).catch(l.error)}}),[]);return r.createElement("iframe",{ref:h,title:"gameFrame",sandbox:"allow-scripts allow-forms allow-same-origin",id:"gameFrame",style:{height:"100%",width:"100%",border:"none"}})}!function(r){r.RoomNotJoinable="RoomNotJoinable",r.CreatorError="CreatorError"}(i||(i={}));export{u as RoomPlayer};
//# sourceMappingURL=index.js.map
